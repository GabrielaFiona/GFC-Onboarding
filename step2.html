<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Onboarding - Build Structure</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- FLOATING INVOICE WIDGET (shared) -->
    <div id="floating-widget" class="collapsed">
        <div class="fw-header" onclick="toggleWidget()">
            <span>ESTIMATED TOTAL</span>
            <span id="fw-header-total">$0</span>
        </div>
        <div class="fw-goal" id="fw-goal-display" style="display:none;"></div>
        <div class="fw-content">
            <div id="fw-items">
                <p class="empty-state">Select a package to start...</p>
            </div>
            <div class="fw-total">
                <span>Total Investment</span>
                <span id="fw-full-total">$0</span>
            </div>
            <div class="fw-deposit">
                50% Deposit: <span id="fw-deposit">$0</span>
            </div>
        </div>
    </div>

    <!-- PROGRESS BAR (4 steps) -->
    <div class="progress-header">
        <div class="progress-bar">
            <div class="progress-line-bg"></div>
            <!-- Step 2 of 4 = 33.33% -->
            <div class="progress-line-fill" id="progress-fill" style="width:33.33%;"></div>
            
            <div class="step-indicator completed" id="step-ind-1">
                1
                <div class="step-label">Business Goals</div>
            </div>
            <div class="step-indicator active" id="step-ind-2">
                2
                <div class="step-label">Build Structure</div>
            </div>
            <div class="step-indicator" id="step-ind-3">
                3
                <div class="step-label">Action Plan</div>
            </div>
            <div class="step-indicator" id="step-ind-4">
                4
                <div class="step-label">Finalize Plan</div>
            </div>
        </div>
    </div>

    <div class="container">
        <div id="step-2" class="step-section active">
            
            <!-- Intro -->
            <div class="intro-block">
                <h1>Build Your Roadmap</h1>
                <p>
                    On this step we’ll choose the website foundation, map out your key pages,
                    and layer in any add-ons you need. This gives us a clear snapshot of your project scope.
                </p>
                <p style="font-size:0.85rem; opacity:0.8;">
                    <em>All website packages include: strategy call (up to 2 hours), 30 days after-launch support,
                    mobile-optimized development, basic SEO, and Google Analytics.</em>
                </p>
            </div>
            
            <!-- 1. Base Packages (same layout as old site) -->
            <h2 class="section-title">1. Choose a Base Package</h2>

            <div class="package-grid">
                <!-- BASIC WEBSITE -->
                <div class="package-card"
                     onclick="selectPackage('basic', 'Basic Website', 750, 2, 425, 150, this)">
                    <div class="package-img-placeholder"></div>
                    <div class="package-content">
                        <span class="package-title">Basic Website</span>
                        <span class="package-price">$750</span>
                        <div class="package-meta">1–2 Pages · 5–7 Days</div>
                        <p class="package-desc">
                            A clean, functional Google Site with essential business information, a basic contact form,
                            and any client-provided content (logo + copy) added for you.
                            <br><br>
                            <strong>Best for:</strong> new businesses or freelancers who need a simple online presence —
                            essentially an online business card with a contact option.
                            <br><br>
                            <strong>Suggested add-ons:</strong> extra page +$150, domain connection +$75,
                            light copy polish +$75/page, or Full Page From Scratch (copy + SEO + build) at $250/page.
                            <br>
                            <strong>Brand Kit bundle:</strong> $425 (15% off).
                            <br>
                            <strong>Revisions & support:</strong> 1 round of consolidated revisions, plus
                            30 days of launch support (up to ~1 hour of small content tweaks).
                        </p>
                    </div>
                </div>

                <!-- POLISHED BRAND SITE -->
                <div class="package-card"
                     onclick="selectPackage('polished', 'Polished Brand Site', 2250, 4, 400, 175, this)">
                    <div class="package-img-placeholder"></div>
                    <div class="package-content">
                        <span class="package-title">Polished Brand Site</span>
                        <span class="package-price">$2,250</span>
                        <div class="package-meta">Up to 4 Pages · 2–3 Weeks</div>
                        <p class="package-desc">
                            A refined, branded Google Site with a polished, professional layout. Includes light copy polish
                            and a more tailored structure to support your offers.
                            <br><br>
                            <strong>Best for:</strong> businesses ready to look established and trustworthy online with
                            a clearly structured, on-brand home base.
                            <br><br>
                            <strong>Suggested add-ons:</strong> additional page +$175, simple booking integration +$250,
                            or Full Page From Scratch (copy + SEO + build) at $300/page.
                            <br>
                            <strong>Brand Kit bundle:</strong> $400 (20% off).
                            <br>
                            <strong>Revisions & support:</strong> 2 rounds of consolidated revisions, 30 days of launch
                            support (up to ~2 hours of tweaks), and one 30-min follow-up call to review analytics & questions.
                        </p>
                    </div>
                </div>

                <!-- PROFESSIONAL WEBSITE -->
                <div class="package-card"
                     onclick="selectPackage('professional', 'Professional Website', 4000, 6, 375, 200, this)">
                    <div class="package-img-placeholder"></div>
                    <div class="package-content">
                        <span class="package-title">Professional Website</span>
                        <span class="package-price">$4,000</span>
                        <div class="package-meta">6 Pages · 3–4 Weeks · Custom-coded</div>
                        <p class="package-desc">
                            A high-end, fully custom-built professional website with custom CSS, stronger SEO foundation,
                            and domain setup — built to support real operations.
                            <br><br>
                            <strong>Best for:</strong> growing businesses needing bookings, analytics, and flexibility to evolve.
                            <br><br>
                            <strong>Suggested add-ons:</strong> extra page +$200, blog setup +$250,
                            or Full Page From Scratch (copy + SEO + build) at $350/page.
                            <br>
                            <strong>Brand Kit bundle:</strong> $375 (25% off).
                            <br>
                            <strong>Revisions & support:</strong> up to 3 rounds of revisions total
                            (design + content + functionality), 45 days of launch support (up to ~3 hours of tweaks),
                            and one 45-min follow-up call with basic analytics review.
                        </p>
                    </div>
                </div>
            </div>

            <!-- 2. Brand Kit (using your Brand Kit data) -->
            <h2 class="section-title" style="margin-top:50px;">2. Brand Kit (Optional)</h2>

            <div class="brand-kit-bar" id="brand-kit-bar" onclick="toggleBrandKit(this)">
                <div class="kit-details">
                    <span class="kit-title">Brand Kit</span>
                    <p class="kit-features">
                        Logo Suite, Brand Colors &amp; Typography, Brand Persona &amp; Target Customer.
                        <br>
                        Includes: primary, secondary &amp; icon logo; 4–6 brand colors; 3–4 fonts; simple PDF guide
                        and basics like business card design.
                    </p>
                </div>
                <div class="kit-price-block">
                    <span class="og-price">$500</span>
                    <span class="discount-label">BUNDLE DISCOUNT APPLIED!</span>
                    <div class="final-price">$500</div>
                </div>
            </div>

            <p style="font-size:0.85rem; color:var(--text-light); opacity:0.7; margin-top:15px;">
                *When bundled with a website package, your Brand Kit price updates automatically to the special
                bundle rate for that package (Basic: $425, Polished: $400, Professional: $375).*
            </p>

            <!-- 3. Website structure & add-ons (same layout as original site) -->
            <div id="addons-section" class="hidden">
                <hr class="divider">

                <!-- Sitemap / pages -->
                <h2 class="section-title">3. Website Structure &amp; Extras</h2>

                <div class="sitemap-builder">
                    <h3>Your Sitemap (Pages)</h3>
                    <p>
                        Let’s list the pages you need. Your selected package includes
                        <strong id="included-pages-count">0</strong> pages.
                        <br>
                        Additional pages are $<span id="extra-page-unit-cost">150</span>/ea
                        (simple additional pages – we’ll confirm the exact type on our call).
                    </p>

                    <div class="page-input-group">
                        <input type="text"
                               id="newPageName"
                               placeholder="e.g. Services, About, Portfolio"
                               onkeypress="handleEnter(event)">
                        <button class="btn btn-add" type="button" onclick="addPage()">+ Add Page</button>
                    </div>

                    <div id="page-list" class="page-list"></div>

                    <div class="page-summary">
                        <span>Total Pages: <span id="total-page-count">0</span></span>
                        <span class="extra-cost-tag" id="extra-page-cost" style="display:none;">+ Extra Cost: $0</span>
                    </div>
                </div>

                <!-- Functional add-ons (same pill layout as old site) -->
                <div style="margin-top:40px;">
                    <h3>Functionality &amp; Services</h3>
                    <p style="font-size:0.9rem; color:var(--text-light); opacity:0.7; margin-bottom:15px;">
                        We’ll finalize these together. You can pre-select anything that feels aligned:
                    </p>

                    <div class="addons-list">
                        <div class="addon-pill"
                             data-addon-id="seo"
                             onclick="toggleAddon('seo', 'Advanced SEO', 500, this)">
                            <span>Advanced SEO</span>
                            <span class="addon-price">+ $500</span>
                        </div>

                        <div class="addon-pill"
                             data-addon-id="copy"
                             onclick="toggleAddon('copy', 'Website Copywriting', 800, this)">
                            <span>Website Copywriting</span>
                            <span class="addon-price">+ $800</span>
                        </div>

                        <div class="addon-pill"
                             data-addon-id="logo"
                             onclick="toggleAddon('logo', 'Logo Suite / Refresh', 300, this)">
                            <span>Logo Suite / Refresh</span>
                            <span class="addon-price">+ $300</span>
                        </div>

                        <div class="addon-pill"
                             data-addon-id="booking"
                             onclick="toggleAddon('booking', 'Booking System Integration', 200, this)">
                            <span>Booking System Integration</span>
                            <span class="addon-price">+ $200</span>
                        </div>

                        <div class="addon-pill"
                             data-addon-id="hosting"
                             onclick="toggleAddon('hosting', 'Hosting &amp; Domain Setup', 300, this)">
                            <span>Hosting &amp; Domain Setup</span>
                            <span class="addon-price">+ $300</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nav buttons -->
            <div class="step-nav-buttons" style="margin-top:40px; display:flex; justify-content:space-between;">
                <button class="btn btn-secondary" type="button" onclick="nextStep(1)">
                    &larr; Back: Business Goals
                </button>
                <button class="btn btn-primary" type="button" onclick="nextStep(3)">
                    Next: Action Plan &rarr;
                </button>
            </div>
        </div>
    </div>

    <!-- Shared JS -->
    <script src="script.js"></script>

    <!-- Step 2 restore logic (uses your current shared script.js) -->
    <script>
    document.addEventListener('DOMContentLoaded', function () {
        // Load saved state from localStorage (from script.js)
        if (window.loadState) {
            window.loadState();
        }

        // Restore package selection
        if (window.state && window.state.package) {
            const pkg = window.state.package;

            const selectedCard = document.querySelector(
                '.package-card[onclick*="' + pkg.id + '"]'
            );
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }

            // Show addons section
            const addonsSection = document.getElementById('addons-section');
            if (addonsSection) {
                addonsSection.classList.remove('hidden');
            }

            // Included pages & extra page rate
            const incEl = document.getElementById('included-pages-count');
            if (incEl) incEl.textContent = pkg.includedPages;

            const rateEl = document.getElementById('extra-page-unit-cost');
            if (rateEl && pkg.extraPageCost != null) {
                rateEl.textContent = pkg.extraPageCost;
            }

            // Brand kit selection
            if (window.state.brandKit) {
                const bar = document.getElementById('brand-kit-bar');
                if (bar) bar.classList.add('selected');
            }

            // Rebuild page list
            if (window.renderPageList) {
                window.renderPageList();
            }
        }

        // Restore add-on pills visual state
        if (window.state && Array.isArray(window.state.addons)) {
            window.state.addons.forEach(function (addon) {
                const pill = document.querySelector(
                    '.addon-pill[data-addon-id="' + addon.id + '"]'
                );
                if (pill) {
                    pill.classList.add('selected');
                }
            });
        }

        // Show goal from Step 1 in widget if saved
        const storedGoal = localStorage.getItem('mainGoal');
        if (storedGoal) {
            const goalDisplay = document.getElementById('fw-goal-display');
            if (goalDisplay) {
                goalDisplay.textContent = 'Goal: ' + storedGoal;
                goalDisplay.style.display = 'block';
            }
        }

        // Update Brand Kit pricing + invoice totals
        if (window.updateBrandKitDisplay) {
            window.updateBrandKitDisplay();
        }
        if (window.calculateTotal) {
            window.calculateTotal();
        }
    });
    </script>
</body>
</html>
